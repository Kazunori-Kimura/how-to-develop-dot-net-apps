# 薬品情報検索システムの機能追加

## 検索条件の保持

これまでの実装では、他画面に遷移した後に `/Home/Index` に戻ってくると、
検索結果が失われていました。

前回の検索結果を復元するように機能を追加します。

<br><br>

## 薬効分類のメンテナンス画面を追加

薬効分類のメンテナンス機能を追加します。

*EntityFrameworkのデータベースファースト開発* によって
`ClassificationsController` と各ビューを自動生成します。

<br><br>

### コントローラー、ビューの自動生成

*ソリューション エクスプローラー* で *Controllers* を右クリック -> *追加* ->
*新規スキャフォールディングアイテム* を選択します。

![image](./images/a2-12.JPG)
<br>

*Entity Framework を使用した、ビューがあるMVC5 コントローラー* を選択し、*追加* をクリックします。

![image](./images/a2-13.JPG)
<br>

*モデル クラス* に `Classifications` 、 *データ コンテキスト クラス* に `DrugInfoContext` を選択し、*追加* をクリックします。

![image](./images/a2-14.JPG)

<br><br>

### Classifications の メタデータクラスを確認

`Models/ClassificationsMetadata.cs`

```cs
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;

namespace WebApplication1.Models
{
    [MetadataType(typeof(ClassificationsMetadata))]
    public partial class Classifications
    {
    }

    public class ClassificationsMetadata
    {
        [DisplayName("薬効分類ID")]
        public int ClassificationId { get; set; }

        [DisplayName("薬効分類コード")]
        [Required(ErrorMessage = "薬効分類コードは必須項目です。")]
        [StringLength(3, ErrorMessage = "薬効分類コードは3桁で入力してください。")]
        public string ClassificationCode { get; set; }

        [DisplayName("薬効分類")]
        [Required(ErrorMessage = "薬効分類名称は必須項目です。")]
        public string Name { get; set; }
    }
}
```

<br><br>

### ナビゲーションバーの変更

ナビゲーションバーに薬効分類の一覧へ遷移するリンクを追加します。

```html

```

<br><br>
